+++
title = "Система не загружается"
description = "Решение распространённых проблем с загрузкой системы"
weight = 1
+++

{{ doc_dates() }}

Если операционная система не загружается, не паникуйте. Большинство проблем можно решить, используя меню загрузчика GRUB или Live USB с дистрибутивом ROSA Linux.

## Проблема 1: Чёрный экран или зависание после выбора системы

Чаще всего это связано с проблемами в ядре или с графическим драйвером.

### Решение 1: Загрузка с предыдущим ядром

При каждом обновлении ядра система сохраняет предыдущую версию.
1.  При загрузке компьютера нажмите `Esc` или `Shift` (для некоторых систем), чтобы отобразить меню GRUB.
2.  Выберите «Advanced options for ROSA Linux».
3.  В списке выберите ядро с более старой версией (например, `5.15.7-1` вместо `5.15.8-1`).

Если система загрузилась, проблема, скорее всего, в последнем обновлении ядра. Вы можете временно работать на старом ядре и дождаться следующего обновления.

### Решение 2: Загрузка в безопасном графическом режиме

1.  В меню GRUB выберите нужную запись и нажмите `e`.
2.  Найдите строку, начинающуюся с `linux`.
3.  Уберите параметры `quiet` и `splash` (если они есть), чтобы видеть лог загрузки.
4.  Добавьте в конец строки параметр `nomodeset`. Это заставит ядро использовать базовый видеодрайвер вместо проприетарного (NVIDIA/AMD), который может вызывать сбой.
5.  Нажмите `Ctrl + X` или `F10` для загрузки.

Если система загрузилась, проблема в драйвере видеокарты. Попробуйте его переустановить.

## Проблема 2: Меню GRUB не появляется, ошибка `grub_rescue>`

Это означает, что загрузчик GRUB повреждён или не может найти файлы операционной системы. Для восстановления потребуется загрузочный Live USB с ROSA Linux.

### Шаг 1: Загрузитесь с Live USB и подготовьте окружение

1.  Загрузите компьютер с Live USB.
2.  Откройте терминал и определите системный раздел с помощью `lsblk -f` или `sudo fdisk -l`.
3.  Примонтируйте корневой раздел вашей установленной системы. Замените `sdaX` на ваш раздел (например, `sda3`).
    ```bash
    sudo mount /dev/sdaX /mnt
    ```
4.  **Если у вас UEFI-система**, примонтируйте также EFI-раздел. Замените `sdaY` на ваш EFI-раздел (например, `sda1`).
    ```bash
    sudo mount /dev/sdaY /mnt/boot/efi
    ```
5.  Примонтируйте виртуальные файловые системы:
    ```bash
    sudo mount --bind /dev /mnt/dev
    sudo mount --bind /proc /mnt/proc
    sudo mount --bind /sys /mnt/sys
    ```

### Шаг 2: Войдите в свою систему с помощью `chroot`

`chroot` (change root) — это команда, которая временно делает `/mnt` корневым каталогом (`/`), позволяя выполнять команды так, как если бы вы загрузились со своего жёсткого диска.

```bash
sudo chroot /mnt
```

### Шаг 3: Восстановите загрузчик

Теперь, находясь внутри своей системы, переустановите и обновите GRUB.

1.  **Определите режим загрузки.** Выполните команду в терминале Live USB (до chroot), чтобы не ошибиться: `[ -d /sys/firmware/efi ] && echo "UEFI" || echo "BIOS"`.
2.  **Переустановите GRUB**, используя команду для вашего режима:
    ```bash
    # Для UEFI-систем (замените esp на /boot/efi, если необходимо)
    grub2-install --target=x86_64-efi --efi-directory=/boot/efi --bootloader-id=rosa

    # Для BIOS-систем (укажите диск, а не раздел)
    grub2-install /dev/sda
    ```
3.  **Сгенерируйте новый конфигурационный файл:**
    ```bash
    grub2-mkconfig -o /boot/grub2/grub.cfg
    ```

## Проблема 3: Kernel panic

Сообщение «Kernel panic — not syncing» означает критическую ошибку, с которой ядро не может справиться.

- **Проверка файловой системы:** Загрузитесь с Live USB и запустите проверку на **отмонтированном** системном разделе.
  ```bash
  # Убедитесь, что раздел не примонтирован!
  umount /dev/sdaX
  sudo fsck /dev/sdaX
  ```
- **Переустановка ядра:** Если проверка ФС не помогла, выполните `chroot` (см. Проблему 2) и переустановите ядро:
  ```bash
  dnf reinstall kernel
  ```
- **Обновление Initramfs:** После переустановки ядра принудительно пересоберите образ начальной загрузки.
  ```bash
  sudo dracut --force
  ```

После выполнения всех процедур выйдите из chroot, перезагрузитесь и извлеките Live USB.
```bash
exit
sudo reboot
```

## Следующий шаг
- [Проблемы после обновлений](@/docs/04-troubleshooting/02-update-issues.md)
