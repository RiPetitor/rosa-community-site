{% extends "base.html" %} {% import "macros/blog_item.html" as blog_item %} {%
import "macros/blog_sidebar.html" as blog_sidebar %} {% block title %}{{
term.name }} - {{ config.extra.site_name }}{% endblock %} {% block body_class
%}blog-page{% endblock %} {% block content %} {% set categories =
get_taxonomy(kind="categories") %} {% set tags = get_taxonomy(kind="tags") %}

<div class="blog-header">
    <h1>★ {{ term.name | upper }} ★</h1>
    <p class="lead">Материалы по теме «{{ term.name }}»</p>

    {% if categories and categories.items %}
    <nav class="blog-nav">
        <a href="{{ get_url(path='@/blog/_index.md') }}" class="nav-btn">Все</a>
        {% for item in categories.items %}
        <a
            href="{{ item.permalink }}"
            class="nav-btn {% if item.name == term.name %}active{% endif %}"
            >{{ item.name }}</a
        >
        {% endfor %}
    </nav>
    {% endif %}
</div>

<div class="blog-layout">
    <div class="blog-main">
        <div class="blog-list">
            {% if paginator %} {% for page in paginator.pages %} {{
            blog_item::render(page=page, index=loop.index0) }} {% endfor %} {%
            elif term.pages %} {% for page in term.pages %} {{
            blog_item::render(page=page, index=loop.index0) }} {% endfor %} {%
            else %}
            <div class="article text-center">
                <h3>Статьи появятся здесь</h3>
                <p>В этой категории пока нет статей.</p>
            </div>
            {% endif %}
        </div>

        {% if paginator %}
        <nav class="pagination">
            {% if paginator.previous %}
            <a href="{{ paginator.previous }}" class="btn btn-secondary"
                >Новее</a
            >
            {% endif %}
            <span class="page-info"
                >Страница {{ paginator.current_index }} из {{
                paginator.number_pagers }}</span
            >
            {% if paginator.next %}
            <a href="{{ paginator.next }}" class="btn btn-secondary">Старше</a>
            {% endif %}
        </nav>
        {% endif %}
    </div>

    {{ blog_sidebar::render(categories=categories, tags=tags) }}
</div>
{% endblock %}
