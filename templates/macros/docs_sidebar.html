{#
  Макрос для боковой панели документации
  Используется в: docs.html, docs-page.html, docs-section.html

  Параметры:
    - title: заголовок для мобильной панели
#}

{% macro render(title) %}
<div class="docs-mobile-bar">
    <button
        class="docs-sidebar-toggle"
        type="button"
        data-docs-sidebar-toggle
        aria-expanded="false"
        aria-controls="docs-sidebar"
        aria-label="Оглавление"
    >
        Оглавление
    </button>
    <span class="docs-mobile-title">{{ title }}</span>
</div>
<div class="docs-sidebar-overlay" data-docs-sidebar-overlay></div>
<aside class="docs-sidebar" id="docs-sidebar" data-docs-sidebar>
    {% set lang_code = lang | default(value="ru") %}
    <div class="docs-search">
        <input
            type="search"
            placeholder="Поиск..."
            aria-label="Поиск"
            data-search-input
            data-search-index="{{ get_url(path='search_index.' ~ lang_code ~ '.json') }}"
            data-search-scope="/docs/"
        />
        <kbd>/</kbd>
    </div>
    <div
        class="docs-search-results"
        data-search-results
        hidden
        aria-live="polite"
    ></div>

    <nav class="docs-nav">
        {% set docs = get_section(path="docs/_index.md") %}
        {% for subsection in docs.subsections %}
            {% set sub = get_section(path=subsection) %}
            <div class="nav-group">
                <h4 class="nav-group-title">{{ sub.title }}</h4>
                <ul>
                    {% for doc_page in sub.pages %}
                    <li>
                        <a href="{{ doc_page.permalink }}">{{ doc_page.title }}</a>
                    </li>
                    {% endfor %}
                </ul>
            </div>
        {% endfor %}
    </nav>
</aside>
{% endmacro %}
