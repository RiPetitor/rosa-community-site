{#
  Макрос для оглавления страницы
  Используется в: docs-page.html, blog-page.html

  Параметры:
    - toc: массив заголовков из page.toc
    - class_name: CSS-класс для aside (по умолчанию "docs-toc")
#}
{% macro render(toc, class_name="docs-toc") %}
{% if toc %}
<aside class="{{ class_name }}">
    <div class="toc-container">
        <h4>На этой странице</h4>
        <ul>
            {% for h2 in toc %}
            <li>
                <a href="#{{ h2.id }}">{{ h2.title }}</a>
                {% if h2.children %}
                <ul>
                    {% for h3 in h2.children %}
                    <li><a href="#{{ h3.id }}">{{ h3.title }}</a></li>
                    {% endfor %}
                </ul>
                {% endif %}
            </li>
            {% endfor %}
        </ul>
    </div>
</aside>
{% endif %}
{% endmacro %}

{#
  Макрос для мобильного оглавления (details/summary)

  Параметры:
    - toc: массив заголовков из page.toc
#}
{% macro render_mobile(toc) %}
{% if toc %}
<details class="docs-toc-mobile">
    <summary>На этой странице</summary>
    <div class="docs-toc-mobile-body">
        <ul>
            {% for h2 in toc %}
            <li>
                <a href="#{{ h2.id }}">{{ h2.title }}</a>
                {% if h2.children %}
                <ul>
                    {% for h3 in h2.children %}
                    <li>
                        <a href="#{{ h3.id }}">{{ h3.title }}</a>
                    </li>
                    {% endfor %}
                </ul>
                {% endif %}
            </li>
            {% endfor %}
        </ul>
    </div>
</details>
{% endif %}
{% endmacro %}
