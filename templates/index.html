{% extends "base.html" %}
{% import "macros/date.html" as date %}
{% block title %}{{ config.extra.site_name }} — Народная операционная система{% endblock %}
{% block body_class %}home{% endblock %}
{% block content %}
<!-- Герой-секция -->
<section class="hero-section animate-fade-in">
    <div class="hero-emblem">☭</div>
    <h1 class="hero-title">Операционная система для народа</h1>
    <p class="hero-subtitle">
        Свободная, надёжная, отечественная. РОСА Linux — выбор миллионов
        пользователей от Калининграда до Владивостока.
    </p>
    <div class="hero-cta">
        <button class="btn btn-primary" data-open-modal="download-modal">
            Скачать РОСА Linux
        </button>
        <a
            href="{{ get_url(path='@/docs/01-getting-started/_index.md') }}"
            class="btn btn-secondary"
        >
            Начать работу
        </a>
    </div>
</section>

<!-- Передовица: последние новости -->
<section class="headline-section">
    <div class="section-header">
        <h2>★ Передовица ★</h2>
    </div>

    <div class="column-layout two-column">
        <div class="main-column">
            {% set blog_section = get_section(path="blog/_index.md", metadata_only=false) %}
            {% if blog_section.pages %}
            {% set featured = blog_section.pages | first %}
            <article class="article featured">
                <header class="article-header">
                    {% if featured.taxonomies.categories %}
                    <span class="article-category">{{ featured.taxonomies.categories | first }}</span>
                    {% endif %}
                    <h2 class="article-title">
                        <a href="{{ featured.permalink }}">{{ featured.title }}</a>
                    </h2>
                    <div class="article-meta">
                        <span class="date">{{ date::format(date=featured.date) }}</span>
                    </div>
                </header>
                <div class="article-excerpt">{{ featured.summary | safe }}</div>
                <footer class="article-footer">
                    <a href="{{ featured.permalink }}" class="read-more">Читать далее</a>
                </footer>
            </article>
            {% else %}
            <article class="article">
                <header class="article-header">
                    <span class="article-category">Анонс</span>
                    <h2 class="article-title">
                        Добро пожаловать в РОСА Linux!
                    </h2>
                </header>
                <div class="article-excerpt">
                    Операционная система РОСА Linux создана российскими
                    разработчиками и доступна всем желающим совершенно
                    бесплатно. Присоединяйтесь!
                </div>
            </article>
            {% endif %}
        </div>

        <aside class="sidebar">
            <div class="sidebar-block">
                <h3 class="sidebar-block-title">★ Быстрые ссылки</h3>
                <ul>
                    <li>
                        <a href="{{ get_url(path='@/docs/01-getting-started/03-installation.md') }}">Руководство по установке</a>
                    </li>
                    <li>
                        <a href="{{ get_url(path='@/docs/01-getting-started/04-first-setup.md') }}">Первые шаги</a>
                    </li>
                    <li>
                        <a href="{{ get_url(path='@/docs/02-daily-use/02-install-packages.md') }}">Установка программ</a>
                    </li>
                    <li>
                        <a href="{{ get_url(path='@/docs/02-daily-use/01-system-update.md') }}">Обновление системы</a>
                    </li>
                    <li>
                        <a href="{{ config.extra.wiki }}" target="_blank" rel="noopener">Wiki-документация</a>
                    </li>
                    <li>
                        <a href="{{ config.extra.forum }}" target="_blank" rel="noopener">Форум поддержки</a>
                    </li>
                </ul>
            </div>

            <div class="sidebar-block">
                <h3 class="sidebar-block-title">★ Текущие версии</h3>
                <ul>
                    <li>
                        <strong>РОСА Фреш:</strong> {{ config.extra.downloads.fresh.version }}
                    </li>
                    <li>
                        <strong>РОСА Фреш LTS:</strong> {{ config.extra.downloads.lts.version }}
                    </li>
                    <li>
                        <strong>{{ config.extra.downloads.server.name }}:</strong>
                        {{ config.extra.downloads.server.version }}
                    </li>
                </ul>
                <div class="text-center mt-2">
                    <button class="btn btn-outline" data-open-modal="download-modal">
                        Все загрузки
                    </button>
                </div>
            </div>
        </aside>
    </div>
</section>

<!-- Возможности системы -->
<section class="headline-section">
    <div class="section-header">
        <h2>★ Возможности ★</h2>
    </div>

    <div class="column-layout three-column">
        <article class="article">
            <header class="article-header">
                <span class="article-category">Простота</span>
                <h3 class="article-title">Без командной строки</h3>
            </header>
            <p>
                Графический установщик драйверов, центр приложений и все
                необходимые программы уже в образе.
            </p>
        </article>

        <article class="article">
            <header class="article-header">
                <span class="article-category">Совместимость</span>
                <h3 class="article-title">Работает везде</h3>
            </header>
            <p>
                Актуальные ядро и драйверы, поддержка современного железа и
                проверенная совместимость с отечественным ПО.
            </p>
        </article>

        <article class="article">
            <header class="article-header">
                <span class="article-category">Сообщество</span>
                <h3 class="article-title">Живая поддержка</h3>
            </header>
            <p>
                Активное русскоязычное сообщество, форум, Telegram и
                документация на родном языке.
            </p>
        </article>
    </div>
</section>

<!-- Последние статьи блога -->
<section class="headline-section">
    <div class="section-header">
        <h2>★ Последние новости ★</h2>
    </div>

    <div class="column-layout three-column">
        {% for post in blog_section.pages | slice(end=3) %}
        <article class="article">
            <header class="article-header">
                {% if post.taxonomies.categories %}
                <span class="article-category">{{ post.taxonomies.categories | first }}</span>
                {% endif %}
                <h3 class="article-title">
                    <a href="{{ post.permalink }}">{{ post.title }}</a>
                </h3>
                <div class="article-meta">
                    <span class="date">{{ date::format(date=post.date) }}</span>
                </div>
            </header>
            <p>
                {{ post.description | default(value=post.summary | striptags | truncate(length=150)) }}
            </p>
            <footer class="article-footer">
                <a href="{{ post.permalink }}" class="read-more">Читать далее</a>
            </footer>
        </article>
        {% else %}
        <article class="article">
            <header class="article-header">
                <span class="article-category">Скоро</span>
                <h3 class="article-title">Новости появятся здесь</h3>
            </header>
            <p>
                Следите за обновлениями — скоро мы расскажем о новых
                возможностях РОСА Linux.
            </p>
        </article>
        {% endfor %}
    </div>

    <div class="text-center mt-3">
        <a href="{{ get_url(path='@/blog/_index.md') }}" class="btn btn-secondary">Все новости</a>
    </div>
</section>

<!-- Призыв к действию -->
<section class="hero-section">
    <h2 class="hero-title">Присоединяйтесь к сообществу!</h2>
    <p class="hero-subtitle">
        Тысячи пользователей уже выбрали РОСА Linux. Станьте частью растущего
        сообщества свободного программного обеспечения.
    </p>
    <div class="hero-cta">
        <a href="{{ config.extra.telegram }}" class="btn btn-primary" target="_blank" rel="noopener">
            Telegram
        </a>
        <a href="{{ config.extra.forum }}" class="btn btn-secondary" target="_blank" rel="noopener">
            Форум
        </a>
        <a href="{{ config.extra.official_site }}" class="btn btn-outline" target="_blank" rel="noopener">
            Официальный сайт
        </a>
    </div>
</section>
{% endblock %}

{% block modals %}
{% include "partials/download_modals.html" %}
{% endblock %}
