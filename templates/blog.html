{% extends "base.html" %} {% import "macros/blog_item.html" as blog_item %} {%
import "macros/blog_sidebar.html" as blog_sidebar %} {% block title %}Блог — {{
config.extra.site_name }}{% endblock %} {% block body_class %}blog-page{% endblock %} {% block content %} {% set categories =
get_taxonomy(kind="categories") %} {% set tags = get_taxonomy(kind="tags") %}

<div class="blog-header">
    <h1>★ НОВОСТИ И СТАТЬИ ★</h1>
    <p class="lead">Передовица сообщества, релизы и практические заметки</p>

    {% if categories and categories.items %}
    <nav class="blog-nav">
        <a href="{{ get_url(path='@/blog/_index.md') }}" class="nav-btn active"
            >Все</a
        >
        {% for term in categories.items %}
        <a href="{{ term.permalink }}" class="nav-btn">{{ term.name }}</a>
        {% endfor %}
        <a
            href="{{ config.extra.repo_url }}/new/{{ config.extra.repo_branch }}?filename=content/blog/new-post.md&value=%2B%2B%2B%0Atitle%20%3D%20%22%22%0Adate%20%3D%20{{ now() | date(format='%Y-%m-%d') }}%0Adescription%20%3D%20%22%22%0A%0A%5Btaxonomies%5D%0Acategories%20%3D%20%5B%22%D0%9D%D0%BE%D0%B2%D0%BE%D1%81%D1%82%D0%B8%22%5D%0Atags%20%3D%20%5B%5D%0A%0A%5Bextra%5D%0Aauthor%20%3D%20%22%22%0A%2B%2B%2B%0A"
            class="nav-btn nav-btn-create"
            target="_blank"
            rel="noopener"
            >+ Написать</a
        >
    </nav>
    {% endif %}
</div>

<div class="blog-layout">
        <div class="blog-main">
            <div class="blog-list">
                {% if paginator %} {% for page in paginator.pages %} {{
                blog_item::render(page=page, index=loop.index0) }} {% endfor %}
                {% elif section.pages %} {% for page in section.pages %} {{
                blog_item::render(page=page, index=loop.index0) }} {% endfor %}
                {% else %}
                <div class="article text-center">
                    <h3>Статьи появятся здесь</h3>
                    <p>
                        Следите за обновлениями — скоро мы опубликуем новые
                        материалы.
                    </p>
                </div>
                {% endif %}
            </div>

            {% if paginator %}
            <nav class="pagination">
                {% if paginator.previous %}
                <a href="{{ paginator.previous }}" class="btn btn-secondary"
                    >Новее</a
                >
                {% endif %}
                <span class="page-info"
                    >Страница {{ paginator.current_index }} из {{
                    paginator.number_pagers }}</span
                >
                {% if paginator.next %}
                <a href="{{ paginator.next }}" class="btn btn-secondary"
                    >Старше</a
                >
                {% endif %}
            </nav>
            {% endif %}
        </div>

                {{ blog_sidebar::render(categories=categories, tags=tags) }}

</div>
{% endblock %}
